# $Header: /afs/dev.mit.edu/source/repository/athena/etc/xdm/xlogin/Imakefile,v 1.4 1992-04-01 20:59:33 lwvanels Exp $
#
# CC can be overridden from driver makefile.  Note the -g flag
# is on the CC macro, not the CFLAGS and LDFLAGS macros, so the
# driver makefile can force optimization instead of debugging.
#
#       CC = gcc -g -DFUNCTION_PROTOTYPES -ansi

DEFINES = -I.

LINTFLAGS = $(CFLAGS) -b -h -u -v -z

  SRCS = xlogin.c AriRegAll.c verify.c
  OBJS = xlogin.o AriRegAll.o verify.o
#if defined(_AIX) && (AIXV >= 30)
  LIBS = -lXaw -lm ../wcl/libWc.a -lXmu -lXt -lXext -lX11 -lkrb -ldes -lhesiod \
	 -lodm -lcfg -ls
#else
  LIBS = -lXaw -lm ../wcl/libWc.a -lXmu -lXt -lXext -lX11 -lkrb -ldes -lhesiod
#endif

create_dir(/etc/athena/login)
SimpleProgram(timeout,timeout.o,,$(ATHBINDIR))
SimpleProgram(xlogin,$(OBJS),$(LIBS),/etc/athena/xlogin)

#if defined(_IBMR2)
all::
	. $(ATHVERS); \
	sed -e "s/ATHENA_VERSION/$$ATHMAJV.$$ATHMINV/" Xlogin.rios.presed > Xlogin
#else
all::
	. $(ATHVERS); \
	sed -e "s/ATHENA_VERSION/$$ATHMAJV.$$ATHMINV/" Xlogin.presed > Xlogin
#endif
	
install_file(check,/etc/athena/login/check)
install_file(question,/etc/athena/login/question)
install_file(warning,/etc/athena/login/warning)
install_file(white,/etc/athena/login/white)
install_file(owl,/etc/athena/login/owl)
install_file(owleyes0.xbm,/etc/athena/login/owleyes0.xbm)
install_file(owleyes1.xbm,/etc/athena/login/owleyes1.xbm)
install_file(owleyes2.xbm,/etc/athena/login/owleyes2.xbm)
install_file(owleyes3.xbm,/etc/athena/login/owleyes3.xbm)
install_file(owleyes4.xbm,/etc/athena/login/owleyes4.xbm)
install_file(owleyes5.xbm,/etc/athena/login/owleyes5.xbm)
install_file(is,/etc/athena/login/is)
install_file(is0.xbm,/etc/athena/login/is0.xbm)
install_file(is1.xbm,/etc/athena/login/is1.xbm)
install_file(is2.xbm,/etc/athena/login/is2.xbm)
install_file(is3.xbm,/etc/athena/login/is3.xbm)
install_file(is4.xbm,/etc/athena/login/is4.xbm)
install_file(is5.xbm,/etc/athena/login/is5.xbm)
install_file(Xlogin,/etc/athena/login/Xlogin)
install_man(timeout.1,timeout.1)
install_man(xlogin.8,xlogin.8)

lint:
	$(LINT) $(LINTFLAGS) $(SRCS)

